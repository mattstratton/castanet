<!-- Check for the Global GoogleAnalytics variable to use the Hugo internal google_analytics template -->
{{ partial "google_analytics.html" . }}


{{ if isset $.Site.Params "favicon"}}
<link rel="icon" href="{{ $.Site.Params.favicon | absURL }}">
{{ else }}
<link rel="icon" href="icons/favicon.ico">
{{ end }}
{{ if (fileExists "static/apple-touch-icon.png") -}}
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
{{- end}}
{{ if (fileExists "static/favicon-32x32.png") -}}
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
{{- end}}
{{ if (fileExists "static/favicon-16x16.png") -}}
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
{{- end}}
{{ if (fileExists "static/site.webmanifest") -}}
<link rel="manifest" href="/site.webmanifest">
{{- end}}
{{ if and (isset $.Site.Params.realfavicongenerator "mask_icon_color") (fileExists "static/safari-pinned-tab.svg") -}}
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="{{ $.Site.Params.realfavicongenerator.mask_icon_color}}">
{{- end}}
{{ if isset $.Site.Params.realfavicongenerator "msapplication_tilecolor" -}}
<meta name="msapplication-TileColor" content="{{ $.Site.Params.realfavicongenerator.msapplication_tilecolor}}">
{{- end}}
{{ if isset $.Site.Params.realfavicongenerator "theme_color" -}}
<meta name="theme-color" content="{{ $.Site.Params.realfavicongenerator.theme_color}}">
{{- end}}

{{ partialCached "css.html" . }}
<!-- Tailwind CSS -->
{{/* Asset bundles */}}
{{ $assets := newScratch }}
{{ $algorithm := .Site.Params.fingerprintAlgorithm | default "sha256" }}
{{ $cssMain := resources.Get "css/custom.css" }}
{{ $assets.Add "css" (slice $cssMain) }}
{{ $jssocials := resources.Get "lib/jssocials/css/jssocials.css" }}
{{ $jssocials_theme := resources.Get "lib/jssocials/css/jssocials-theme-plain.css" }}
{{ $fontawesome := resources.Get "lib/fontawesome/css/all.css" }}
{{ $mediaelement := resources.Get "lib/mediaelement/css/mediaelementplayer.min.css" }}
{{ $mediaelementcustom := resources.Get "css/mediaelementplayer.custom.css" }}
{{ $mediaelementspeed := resources.Get "lib/mediaelement/css/speed.min.css" }}
{{ $assets.Add "css" (slice $jssocials $jssocials_theme $fontawesome $mediaelement $mediaelementcustom $mediaelementspeed) }}
{{ $cssCustom := resources.Get "css/custom.css" }}
{{ if $cssCustom }}
  {{ $assets.Add "css" (slice $cssCustom) }}
{{ end }}
{{ $bundleCSS := $assets.Get "css" | resources.Concat "css/main.bundle.css" | resources.Minify | resources.Fingerprint $algorithm }}
<link
  type="text/css"
  rel="stylesheet"
  href="{{ $bundleCSS.RelPermalink }}"
  integrity="{{ $bundleCSS.Data.Integrity }}"
/>

<link href="https://fonts.googleapis.com/css?family=Lato|Raleway" rel="stylesheet">

{{ if eq .Section "blog" }}
    <link rel="alternate" type="application/rss+xml" title="{{$.Site.Title}}" href="{{"blog/index.xml" | absURL }}"/>
{{ else }}
    {{- if (isset $.Site.Params "rss_subscribe" ) -}}
        <link rel="alternate" type="application/rss+xml" title="{{$.Site.Title}}" href="{{$.Site.Params.rss_subscribe}}"/>
    {{- else -}}
        <link rel="alternate" type="application/rss+xml" title="{{$.Site.Title}}" href="{{"episode/index.xml" | absURL }}"/>
    {{- end -}}
{{ end }}
<!-- combine javascript files-->
{{ $jquery := resources.Get "lib/jquery/jquery.js" }}
{{ $jssocials := resources.Get "lib/jssocials/jssocials.js" }}
{{ $mediaelement := resources.Get "lib/mediaelement/mediaelement-and-player.js" }}
{{ $speed := resources.Get "lib/mediaelement/speed.js" }}
{{ $speed_i18n := resources.Get "lib/mediaelement/speed-i18n.js" }}
{{ $castanet := resources.Get "js/castanet.js" }}

{{ $js := slice $jquery $jssocials $mediaelement $speed $speed_i18n $castanet | resources.Concat "js/castanet-min.js" | resources.Minify | resources.Fingerprint }}
<script src="{{ $js.RelPermalink }}" integrity="{{ $js.Data.Integrity }}"></script>